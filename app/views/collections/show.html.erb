<div id="navigation">
  <header>
    <%= render "shared/nav" %>
  </header>
  <div class="subnav">
    <nav>
      <% @collections.each do |coll| %>
        <a href="/collections/<%= coll.id %>" <%= if coll.id == @collection.id then "class=current" end %>><%= coll.name %></a>
      <% end %>
    </nav>
  </div>
</div>

<div id="items"> 
<section class="blog collection">
  <article>
    <div class="collection-info">
      <h2><%= @collection.name %></h2>
      <p><%= @collection.description %></p>
    </div>
    
    <div id="my-carousel">
    <% @items.each do |item| %>
      <div class="carousel not-fullscreen background" style="background-image:url('<%= item.image_style_one_url %>');" data-img-width="3000" data-img-height="2144">
      </div>
    <% end %>
    </div>
    <p class="carousel-prev"><img src="/assets/left-arrow.svg" alt="&laquo;" style="height:100%" /></p>
    <p class="carousel-next"><img src="/assets/right-arrow.svg" alt="&raquo;" style="height:100%" /></p>
  
    <div style="position: absolute; top: 0; right: 0; border: 1px solid #fff; padding: 5px; margin: 15px; font-size: 0.8em;">
      <p><a href="#">Shop this item</a></p>
    </div>
  </article>
</section>
</div>

<script type="text/javascript">
  $(function(){
    var current = 0;
    var items = [];

    $('#my-carousel div.carousel').each(function(){
      items.push(this)
    })

    $('.carousel-prev').click(function(){
      $(items[current]).fadeOut();
      current--;
      if (current == -1) {
        current = items.length - 1
      }
      $(items[current]).fadeIn()
    })

    $('.carousel-next').click(function(){
      console.log('nxt');
      $(items[current]).fadeOut();
      current++;
      if (current == items.length) {
        current = 0
      }
      $(items[current]).fadeIn()
    })

    $(items[current]).fadeIn();

    backgroundResize({ 'data' : {'widthEle' : '#my-carousel', 'heightEle' : '#my-carousel'} });
  });
</script>


<%= render "shared/footer" %>