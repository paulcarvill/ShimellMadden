<!DOCTYPE html>
<html>
<head>
  <title>Shimell and Madden</title>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <%= stylesheet_link_tag "application", media: "all" %>
  <%= yield :meta %>
  <%= render "shared/svgicons" %>
</head>
<body class="<%== bodyclass() %>">
  <div id="contentcontainer">
    <div id="items"> 
      <section class="blog items">
        <p id="shoplinks">
          <a href="https://shimell-and-madden-2.myshopify.com/"><%= render 'shared/cart' %><span>Shop</span></a>
        </p>
        <p id="homepagelinks">
          <a target="_blank" href="http://instagram.com/Shimell_Madden/"><svg id="instagram" class="custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px; vertical-align: bottom; position: relative; top: -2px;">
          <circle class="outer-shape" cx="50" cy="50" r="38" style="opacity: 1; fill: transparent; stroke-width: 6px; stroke: rgb(255, 255, 255);"></circle>
          <path class="inner-shape" style="opacity: 1; fill: rgb(255, 255, 255);" transform="translate(25,25) scale(0.5)" d="M88.2,1H11.8C5.85,1,1.026,5.827,1.026,11.781V88.22C1.026,94.174,5.85,99,11.8,99H88.2c5.95,0,10.774-4.826,10.774-10.78 V11.781C98.973,5.827,94.149,1,88.2,1z M49.946,31.184c10.356,0,18.752,8.4,18.752,18.762c0,10.361-8.396,18.761-18.752,18.761 s-18.752-8.4-18.752-18.761S39.589,31.184,49.946,31.184z M87.513,83.615c0,2.165-1.753,3.919-3.917,3.919H16.341 c-2.164,0-3.917-1.755-3.917-3.919v-41.06h8.508c-0.589,2.35-0.904,4.807-0.904,7.34c0,16.612,13.459,30.079,30.063,30.079 s30.063-13.466,30.063-30.079c0-2.533-0.315-4.99-0.904-7.34h8.263L87.513,83.615L87.513,83.615z M87.764,27.124 c0,2.165-1.754,3.919-3.918,3.919H72.723c-2.164,0-3.917-1.755-3.917-3.919v-11.13c0-2.165,1.754-3.919,3.917-3.919h11.123 c2.165,0,3.918,1.755,3.918,3.919V27.124z"></path>
          </svg><span>Instagram</span></a>

          <a target="_blank" href="https://www.facebook.com/pages/Shimell-and-Madden/153510408023083"><svg id="facebook-square" class="custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px; vertical-align: bottom; position: relative; top: -2px;">
          <circle class="outer-shape" cx="50" cy="50" r="38" style="opacity: 1; fill: transparent; stroke-width: 5; stroke: rgb(255, 255, 255);"></circle>
          <path class="inner-shape" style="opacity: 1; fill: rgb(255, 255, 255);" transform="translate(25,25) scale(0.5)" d="M82.667,1H17.335C8.351,1,1,8.351,1,17.336v65.329c0,8.99,7.351,16.335,16.334,16.335h65.332 C91.652,99.001,99,91.655,99,82.665V17.337C99,8.353,91.652,1.001,82.667,1L82.667,1z M84.318,50H68.375v42.875H50V50h-8.855V35.973 H50v-9.11c0-12.378,5.339-19.739,19.894-19.739h16.772V22.3H72.967c-4.066-0.007-4.57,2.12-4.57,6.078l-0.023,7.594H86.75 l-2.431,14.027V50z"></path>
          </svg><span>Facebook</span></a>

          <a target="_blank" href="https://twitter.com/Shimell_Madden"><svg id="twitter" class="custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px; vertical-align: middle; position: relative; top: -2px;">
          <circle class="outer-shape" cx="50" cy="50" r="38" style="opacity: 1; stroke: rgb(255, 255, 255); stroke-width: 5; fill: transparent"></circle>
          <path class="inner-shape" style="opacity: 1; fill: rgb(255, 255, 255);" transform="translate(25,25) scale(0.5)" d="M99.001,19.428c-3.606,1.608-7.48,2.695-11.547,3.184c4.15-2.503,7.338-6.466,8.841-11.189 c-3.885,2.318-8.187,4-12.768,4.908c-3.667-3.931-8.893-6.387-14.676-6.387c-11.104,0-20.107,9.054-20.107,20.223 c0,1.585,0.177,3.128,0.52,4.609c-16.71-0.845-31.525-8.895-41.442-21.131C6.092,16.633,5.1,20.107,5.1,23.813 c0,7.017,3.55,13.208,8.945,16.834c-3.296-0.104-6.397-1.014-9.106-2.529c-0.002,0.085-0.002,0.17-0.002,0.255 c0,9.799,6.931,17.972,16.129,19.831c-1.688,0.463-3.463,0.71-5.297,0.71c-1.296,0-2.555-0.127-3.783-0.363 c2.559,8.034,9.984,13.882,18.782,14.045c-6.881,5.424-15.551,8.657-24.971,8.657c-1.623,0-3.223-0.096-4.796-0.282 c8.898,5.738,19.467,9.087,30.82,9.087c36.982,0,57.206-30.817,57.206-57.543c0-0.877-0.02-1.748-0.059-2.617 C92.896,27.045,96.305,23.482,99.001,19.428z"></path>
          </svg><span>Twitter</span></a>
        </p>
        <div id="my-carousel" class="my-carousel">
          <% @homepageitems.each_with_index do |item, index| %>
            <style>
              @media (max-width: 600px) { .b-<%=index %> { background-image:url('<%= item.img_url_small %>');  } }
              @media (min-width: 601px) { .b-<%=index %> { background-image:url('<%= item.img_url_large %>');  } }
            </style>
            <div class="carousel not-fullscreen background b-<%=index %><% if index == 0 %> active<% end %>" style="background-size:cover;"></div>
          <% end %>
          <div class="content-a">
            <div class="content-b">
              <h1><%= render 'shared/logotype' %><%= render 'shared/logo' %></h1>
            </div>
          </div>
          <p class="carousel-prev"><%= render 'shared/leftarrow' %></p>
          <p class="carousel-next"><%= render 'shared/rightarrow' %></p>
          <p class="indicator"></p>
        </div>
        <div class="pre-addition">
          <%= render 'shared/sitenav', :logo => false %>
          <div class="pre-pre-addition">
            <article style="margin-top: 22px;">
              <% @items.each_with_index do |item, index| %>
              <div class="item item-<%= index+1 %>">
                <div class="not-fullscreen background" style="background-image:url(<%= if index == 2 then item.img_url_large else item.img_url_small end %>); background-size: cover; background-position: 50% <%= item.weight %>">
                  <a href="/<%= if item.group then item.group.grouptype.pluralize.downcase else "archive" end %>/<%= if item.group then item.group.id else item.id end %>">
                    <div class="content-a">
                      <div class="content-b">
                        <%= if item.group then item.group.name else "Archive" end %>
                        <hr style="width: 150px; margin: 16px auto;">
                        <p><%= if item.group then item.group.grouptype else "Archive" end %></p>
                      </div>
                    </div>
                  </a>
                </div>
                <p class="proj-name"><%= if item.group then (item.group.grouptype + ": " + item.group.name) else "Archive" end %></p>
              </div>
              <% end %>
              <div id="progress">
                <img src="<%= asset_path "progress.gif" %>" />
              </div>
            </article>
          <%= render "shared/footer" %>
          </div>
        </div>
      </section>
    </div>
    <% content_for :perpagejs do %>
    <%= render 'shared/handlebars' %>
    <script>
      var page = 2;
      var item = 6;
      function getItems(pageNumber, initialScroll) {
        $.get('/items.json?page=' + page, function(resp){
          for(var i = 0; i < resp.length; i++) {
            var context = resp[i];
            context.num = i+1;
            $(template(context)).insertBefore($('#progress')).animate({ opacity : 1 }, 1500);
          }
          if(resp.length < 6) {
            $('#progress').hide();
            $('footer').data('am-i-appeared', true);
          } else {
              $('footer').data('am-i-appeared', false);
          }
          item += resp.length;
          $('footer').animate({ opacity : 1 } );
          $('footer').appear();
          $('footer').show();
        });
      }
      function doTransition(e) {
        e.preventDefault();
        $('html,body').animate({
          scrollTop: $('.pre-addition').offset().top
        }, 1000);
      }
      $('document').ready(function() {
        $('nav').appear();
        $('header').waypoint('sticky');
        $('h1').click(doTransition);
        $(document.body).on('appear', 'nav', function(e) {
          var $this = $(this);
          if ($this.data('am-i-appeared')) {
            return;
          }
          $this.data('am-i-appeared', true);
          $('#progress').show();
          window.setTimeout(function(){
            getItems(page, true)
          }, 500);
        }); 
        $(document.body).on('appear', 'footer', function(e) {
          var $this = $(this);
          if ($this.data('am-i-appeared')) {
            return;
          }
          $this.data('am-i-appeared', true);
          page++;
          $('#progress').show();
          window.setTimeout(function(){
            getItems(page)
          }, 1000);
        });
      });  
    </script>
    <% end %>
    <%= javascript_include_tag "application" %>
    <%= yield :perpagejs %>
    <%= render 'shared/ga' %>
  </div>
</body>
</html>